define("sidebar-directive",[],function(){function e(e,t,r){function n(e,n,c,l){function u(){var e,t;$(O).html("");for(var r=0;r<D.length;r++)t=c.componentName+"."+D[r].name,e=a(D[r],t,O),D[r].hasOwnProperty("items")&&p(D[r],t,e)}function p(e,t,r){for(var n,i,a,o=e.items,c=s("ul"),l=0;l<o.length;l++)n=s("li"),i=s("a",{"class":"have-child"}),a=document.createTextNode(o[l].label),n.setAttribute("relation",t+"."+o[l].name),n.setAttribute("is-child",!0),i.appendChild(a),n.appendChild(i),c.appendChild(n);r.appendChild(c)}function d(e,t){var r=w.closeOthers;switch(r){case"oneAtATime":var n=$(t).find("ul"),i=n.is(":visible");h(t,null,"slow"),n.find("li").length>0&&(i?$(t).removeClass("expand").addClass("collap"):$(t).removeClass("collap").addClass("expand"),o(n,!i,"slow"))}j(t),y.parentItems.events.hasOwnProperty("click")&&y.parentItems.events.click(e);var s=$(t).find("div.child-breadcrumb");s.length>0&&I(s)}function g(e,t){if(e.hasOwnProperty("items")&&e.items.length>0){var r=t.getAttribute("relation"),n=$(t).parents("ul").first(),i=n.parents("li").first();n.remove(),p(e,r,i[0]),v(i,r,e)}C(t),y.childItems.events.hasOwnProperty("click")&&y.childItems.events.click(e)}function v(e,t,r){var n=e.find("div.child-breadcrumb").first();0===n.length&&(n=f(e)),n[0].setAttribute("child-path",t),m(n,t,r)}function f(e){var t=e.find("ul").first();if(t.length>0){var r=$(["<div class='child-breadcrumb prev-path extra-wrap'>","</div>"].join(""));return t.before(r),r}return null}function m(e,t,r){function n(){var t=document.createElement("a");return t.setAttribute("class","block fl text-continue"),e.append(t),t}function i(){e.append(["<span class='block fl'> Â» </span>"].join(""))}function s(t){t.addEventListener("click",function(t){t.stopPropagation(),I(e)})}function a(t){t.addEventListener("click",function(r){r.stopPropagation(),o(t);var n=e[0].getAttribute("child-path"),i=n.split("."),s=i.slice(0,i.length-1).join(".");_relationObj=L(s),$(t).html(_relationObj.label),p(_relationObj,s,$(this).parents("li").first()[0]),3===n.split(".").length?e.remove():e[0].setAttribute("child-path",s)})}function o(e){$(e).parents("li").first().find("ul").remove()}e.html("");var c,l=(t.split("."),n());$(l).append("home"),s(l),i(),c=n(r),$(c).append(r.label),a(c)}function h(e,t,r){var n=$(e).parents("sidebar"),i=n.find("ul:first > li:visible"),s=i.find("ul");i.length>0&&(t&&(i=i.not(t.parents("li").first())),i.removeClass("expand")),s.length>0&&o(t?s.not(t):s,!1,r)}function j(e){var t,r;w.setParentItemActiveOnClick&&(t=w.parentItemActiveClass,r=$(e).parents("sidebar").find("ul:first > li"),r.length>0&&r.removeClass(t),$(e).addClass(t))}function C(e){var t=w.childItemActiveClass;$(e).parents("sidebar").find("ul li ul li."+t).removeClass(t),$(e).addClass(t)}function L(e){for(var t,r=e.split("."),n=1;n<r.length;n++)t?t&&t.hasOwnProperty("items")&&(t=b(r[n],t.items)):t=b(r[n],y.items);return t}function b(e,t){for(var r=0;r<t.length;r++)if(t[r].name===e)return t[r];return null}function I(e){e.parents("li").find("ul").first().remove();var t=e[0].getAttribute("child-path"),r=t.split("."),n=r.slice(0,2).join(".");p(L(n),n,e.parents("li").first()[0]),e.remove()}function P(){t.off("click","sidebar li[is-parent='true']").on("click","sidebar li[is-parent='true']",function(e){e.isChild||d(L(this.getAttribute("relation")),this)}),t.off("click","sidebar li[is-child='true']").on("click","sidebar li[is-child='true']",function(e){e.isChild=!0,g(L(this.getAttribute("relation")),this)}),e.$on(r.events.onComponentItemActive,function(e,t){var r=t.componentName+"."+t.relation,i=n.find("li[relation='"+r+"']"),s=i.parents("ul"),a=s.parents("li").first();i.length>0&&(a.addClass("expand").removeClass("collap"),o(s,!0,"slow"),j(a[0]),C(i[0])),h(a,s,"slow")}),e.$on(r.events.onComponentParentItemActive,function(e,t){var r,i=t.componentName+"."+t.relation,s=n.find("li[relation='"+i+"']");s.length>0&&(j(s[0]),r=s.find("ul"),r.find("li").length>0&&(o(r,!0,"slow"),s.removeClass("collap").addClass("expand")))}),e.$on(r.events.onAddingComponentItems,function(e,t){t.componentName===A&&(D=t.items,u(),h(O))}),e.$on(r.events.onEventAttachToComponentParentItem,function(e,t){y.parentItems.events[t.eventName]=t.eventCallback}),e.$on(r.events.onEventAttachToComponentChildItem,function(e,t){y.childItems.events[t.eventName]=t.eventCallback})}if(!c.hasOwnProperty("componentName"))throw{message:"component-name attribute required for directive sidebarDirective"};var y=r.getComponent(c.componentName);if(!y)throw{message:"component "+c.componentName+" doesn't exist"};var A=c.componentName,D=y.items,w=y.settings,O=i(n);u(),h(O),P()}function i(e){var t=s("div",{"class":"sidebar"}),r=s("ul",{"class":"parent"});return t.appendChild(r),e.append(t),r}function s(e,t){var r=document.createElement(e);for(var n in t)r.setAttribute(n,t[n]);return r}function a(e,t,r){var n,i=s("li"),a=s("a"),o=s("span"),c=document.createTextNode(e.label);return e.hasOwnProperty("iconClass")&&(n=s("i"),n.setAttribute("class",e.iconClass),a.appendChild(n)),i.setAttribute("is-parent",!0),i.setAttribute("relation",t),o.appendChild(c),a.appendChild(o),i.appendChild(a),r.appendChild(i),i}function o(e,t,r){var r=r||"";r?t===!0?e.slideDown(r):e.slideUp(r):e.toggle(t)}return{restrict:"E",scope:!0,link:n}}return e.$inject=["$compile","$document","sidebarService"],e}),define("project-category-panel-directive",[],function(){function e(e,t,r,n){function i(t,i,s,a){function o(){a.fetchingProjectCategories=!0,r.getCategories().then(function(e){a.fetchingProjectCategories=!1,g=e,l(g)},function(e){a.fetchingProjectCategories=!1,a.errorObj=e})}function c(){a.errorObj=null;var r=o();return s.hasOwnProperty("onCategoriesReload")&&e(s.onCategoriesReload)(t),r}function l(r){for(var i=[],o=0;o<r.length;o++)i.push({name:r[o].name,label:r[o].name,categoryObj:r[o],items:u(r[o])});n.addComponentItems("projectCategory",i),a.activeCategory.hasOwnProperty("id")&&n.setComponentParentItemActive("projectCategory",a.activeCategory.name,!0),n.attachEventForComponentParentItem("projectCategory","click",function(r){a.setActiveCategory(r.categoryObj),s.onCategoryClick&&e(s.onCategoryClick)(t)})}function u(e,t){var r={};if(t||(t=[]),e.hasOwnProperty("childs"))for(var n=0;n<e.childs.length;n++)r={name:e.childs[n].name,label:e.childs[n].name,items:[]},t.push(r),e.childs[n].hasOwnProperty("childs")&&u(e.childs[n],r.items);return t}var p=s.activeCategory?e(s.activeCategory)(t):null,d=s.projectCategoryModel,g=e(d)(t);o(),a.reloadCategories=c,a.setActiveCategory(p),a.errorObj=null,s.activeCategory&&t.$watch(s.activeCategory,function(e){e.hasOwnProperty("id")&&(n.setComponentParentItemActive("projectCategory",e.name,!0),a.setActiveCategory(e))})}function s(){function e(e){t.activeCategory=e}var t=this;t.activeCategory={},t.setActiveCategory=e}return{restrict:"E",template:"<sidebar component-name='projectCategory'></sidebar>",link:i,controller:s,controllerAs:"categoryPanel"}}return e.$inject=["$parse","$compile","projectCategoryService","sidebarService"],e}),define("projects-list-controller",[],function(){function e(e,t,r,n,i,s,a){function o(){n.setHeaderActive(!0),i.init(),c(),l()}function c(){i.getProjectsListDetails().then(function(){v.projectsListDetails=i.projectsListDetails})}function l(){v.events.onFilterChange=p,v.events.onCategoryChange=d,v.events.onProjectsListPageChange=u,v.events.onProjectListDetailsReload=g}function u(e){c()}function p(e){i.onFilterChange(e),c()}function d(e){i.onCategoryChange(e),v.activeCategory.category=e,c()}function g(){c()}var v=this;v.categories=[],v.filterPanelObject={},v.activeCategory=i.activeCategory,v.projectsListDetails={},v.request=i.request,v.events={},v.errors=i.errors,v.messages=i.messages,v.paths=i.paths,v.ajaxLoaderCategoryDetails={msg:v.messages.getMessage("loadingCategories"),loaderImg:v.paths.ajaxLoaderImg},v.ajaxLoaderFilterDetails={msg:v.messages.getMessage("loadingFilters"),loaderImg:v.paths.ajaxLoaderImg},v.ajaxLoaderProjectsListDetails={msg:v.messages.getMessage("loadingProjectsList"),loaderImg:v.paths.ajaxLoaderImg},o()}return e.$inject=["$scope","$state","$stateParams","headerService","projectsListService","alertsFactory","projectInstructionalLevelService"],e}),define("project-instructional-level-service",[],function(){function e(e,t,r,n){function i(){function i(){return a?a.promise:s()}function s(){function i(e){var t={error:!0,msg:""};switch(e.code){default:t.msg=n.getComponentMessages("projects").getMessage("filtersFetchFail")}return t}return o.request.fetchingInstructionalLevel=!0,a=e.defer(),t.projectInstructionalLevel.get().$promise.then(function(e){o.request.fetchingInstructionalLevel=!1;var t=[];t.push(o.getDefaultInstructionalLevel()),e=r.processData(e);for(var n=0;n<e.length;n++)t.push({id:e[n].id,name:e[n].name});a.resolve(t)},function(e){o.request.fetchingInstructionalLevel=!1;var t=r.processError(e);a.reject(i(t)),a=null}),a.promise}return i()}function s(){return{id:0,name:"All"}}var a,o;return o={getInstructionalLevels:i,getDefaultInstructionalLevel:s,request:{fetchingInstructionalLevel:!1}}}return e.$inject=["$q","rest","restMiddleware","messageService"],e}),define("projects-list-service",[],function(){function e(e,t,r,n,i,s,a,o,c,l,u,p,d){function g(){$=c.getComponent("projectsList"),$.setCurrentPageNumber(1),j()}function v(){function e(){return A.request.fetchingProjectsListDetails=!0,A.errors.projectsList=null,$.setProcessingStatus(!0),t.getProjectsListPageDetails({categoryId:w.categoryId,instructionalLevels:w.instructionalLevels.join(","),startLimit:d,endLimit:c}).$promise.then(function(e){A.request.fetchingProjectsListDetails=!1,$.setProcessingStatus(!1),1===parseInt(p)&&e.hasOwnProperty("total_count")&&(D[g]=parseInt(e.total_count,10),$.setTotalItems(D[g])),A.projectsListDetails.projectsList=n(e),A.projectsListDetails.instructionalLevels=i(e),b(),y.resolve(),y.destroy()},function(e){A.request.fetchingProjectsListDetails=!1,A.projectsListDetails.projectsList={},A.projectsListDetails.instructionalLevels={},$.setProcessingStatus(!1);var t=r.processError(e);A.errors.projectsList=s(t),y.reject(),y.destroy()}),y}function n(e){for(var t=[],r=e.projects_list,n=0;n<r.length;n++)t.push({id:r[n].id,defaultProjectImagePath:o.getPath("images")+"/"+r[n].default_project_image_path,status:r[n].status,projectName:r[n].course_name,projectSubname:r[n].course_subname,projectLoaderImg:l,instructionalLevel:r[n].instructional_level,isCertifiable:1===parseInt(r[n].is_verifiable),projectImagePath:{fileName:r[n].course_image,folderName:r[n].folder_name}});return t}function i(e){for(var t=[{name:"instructionalLevels",label:"Skill level",obj:[]}],r=e.instructional_level,n=0,i=0;i<r.length;i++)t[0].obj.push({id:r[i].id,name:r[i].name,cnt:r[i].cnt,disabled:0===parseInt(r[i].cnt)}),n+=parseInt(r[i].cnt);t[0].obj.unshift({id:0,name:"All",cnt:n,disabled:0===n});for(var s=0;s<t[0].obj.length;s++)for(var i=0;i<w.instructionalLevels.length;i++)parseInt(t[0].obj[s].id)===parseInt(w.instructionalLevels[i])&&(t[0].obj[s].checked=!0);return t}function s(e){var t={error:!0,msg:""};switch(e.code){default:t.msg=a.getComponentMessages("projectsList").getMessage("projectsListFetchFail")}return t}if(y){if(y.exist())return y;y.recreatePromise()}else y=u.createPromise();for(var c=$.getItemsPerPage(),p=$.getCurrentPageNumber(),d=$.getTotalPaginatedItems(p-1),g=w.categoryId,v=0;v<w.instructionalLevels.length;v++)g=g+""+w.instructionalLevels[v];return 1===parseInt(p)&&D.hasOwnProperty(g)&&$.setTotalItems(D[g]),e()}function f(e){h(),w.categoryId=e.id,w.instructionalLevels=[0]}function m(e){if(h(),e.instructionalLevels.checked){var t=parseInt(e.instructionalLevels.id);if(0===t)w.instructionalLevels=[0];else{var r=w.instructionalLevels.indexOf(0);r>-1&&w.instructionalLevels.splice(r,1),w.instructionalLevels.push(t),w.instructionalLevels=w.instructionalLevels.sort(function(e,t){return e-t})}}else{var t=parseInt(e.instructionalLevels.id),r=w.instructionalLevels.indexOf(t);r>-1&&w.instructionalLevels.splice(r,1),0===w.instructionalLevels.length&&(w.instructionalLevels=[0])}}function h(){$.setCurrentPageNumber(1)}function j(){p.listenEvent({componentName:"projectsListDetails",eventName:n.events.onSessionUpdate,eventCallback:I}),p.listenEvent({componentName:"projectsListDetails",eventName:d.events.onCategoryClick,eventCallback:P})}function C(){return{fetchingProjectsListDetails:!1}}function L(){return{projectsList:!1}}function b(){i.getCategories().then(function(e){for(var t=0;t<e.length;t++)if(parseInt(e[t].id)===parseInt(w.categoryId)){A.activeCategory.category=e[t];break}})}function I(){n.exist()||($=null,A.request=C(),A.errors=L(),D={},w={categoryId:0,instructionalLevels:[0]})}function P(e,t){w.categoryId=t.categoryId,b(),h(),v()}var y,$,A,D={},w={categoryId:0,instructionalLevels:[0]};return A={init:g,getProjectsListDetails:v,projectsListDetails:{},onCategoryChange:f,activeCategory:{category:{}},onFilterChange:m,request:C(),errors:L(),messages:a.getComponentMessages("projectsList"),paths:{ajaxLoaderImg:o.getPath("images.content-loader"),relatedProjectsTemplate:o.getPath("projects-list.related-projects-html"),topProjectsTemplate:o.getPath("projects-list.top-projects-html")}}}return e.$inject=["$q","rest","restMiddleware","session","projectCategoryService","projectImageService","messageService","pathService","paginationService","PROJECT_LOADER_IMAGE","promiseService","eventService","headerAutocompleteService"],e}),define("project-image-service",[],function(){function e(){function e(e){i=e}function t(){return i}function r(e){s=e}function n(e,t,r,n,a){function o(){return s}function c(s){function a(){if(s.hasOwnProperty("projectId"))return u.hasOwnProperty(s.projectId)?imagePromise[s.projectId].promise:o();var t=e.defer();return t.resolve(c(s)),t.promise}function o(){var t=s.projectId;return u[s.projectId]=e.defer(),r.projectDetails.get({filter:"id = "+t,fields:"folder_name, course_image"}).$promise.then(function(e){return e=n.processData(e),0===e.length?u[t].resolve({isDefault:!0,url:DEFAULT_PROJECT_IMAGE}):u[t].resolve(c({folderName:e[0].folder_name,fileName:e[0].course_image}))},function(e){image_details[s.project_id].reject(),delete image_details[s.project_id]}),imageDetails[s.projectId].promise}function c(e){var r=i.replace(/^\/+/g,"").replace(/\/+$/g,"");r+="/"+e.folderName.replace(/^\/+/g,"").replace(/\/+$/g,"")+"/"+e.fileName;var n=t.getObjectUrl("",r,!0);return{isDefault:!1,url:n}}return a()}s||(s=a.getPath("images.watermark-logo"));var l,u={};return l={getDefaultProjectImageUrl:o,getImageUrl:c}}n.$inject=["$q","s3","rest","restMiddleware","pathService"];var i="course",s="";return{setBaseProjectImageS3Container:e,getBaseProjectImageS3Container:t,setDefaultProjectImageUrl:r,$get:n}}return e}),define("app/projects-list/projects-list.runtime.js",["sidebar-directive","project-category-panel-directive","projects-list-controller","project-instructional-level-service","projects-list-service","project-image-service"],function(e,t,r,n,i,s){return{sidebarDirective:e,projectCategoryPanelDirective:t,ProjectsListController:r,projectInstructionalLevelService:n,projectsListService:i,projectImageService:s}},function(e){console.log(e)});