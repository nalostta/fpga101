define("project-details-service",[],function(){function e(e,t,r,s,i,o,c,n,a,l,u,p,d,m,j,f,g){function D(){C(),F()}function b(t){function r(r){if(r.hasOwnProperty("hasPermission")&&r.hasPermission===!1)return j.redirectOnPermissionDenied();T.projectDetails={enrollTabActive:!1,projectId:r.courseDetails.id,projectStatus:parseInt(r.courseDetails.status),projectName:r.courseDetails.course_name,projectSubname:r.courseDetails.course_subname,projectInstructionalLevel:r.courseDetails.instructional_level_name,isProjectVerifiable:0,projectStaus:parseInt(r.courseDetails.status),timeToBeDedicated:r.courseDetails.time_to_be_dedicated,allowFreeEnrollment:parseInt(r.courseDetails.allow_free_enrolment),projectImageDetails:{folderName:r.courseDetails.folder_name,fileName:r.courseDetails.course_image},gradingCriteria:r.projectGradingCriteria,instructorDetails:[],volunteerDetails:[],certifateProviderDetails:[],relatedProjects:[],user:{},projectDuration:r.courseDetails.expires_after_in_days};var s=d.convertAmount(r.courseDetails.course_price);T.projectDetails.projectPrice=s.value,T.projectDetails.formattedProjectPrice=s.formattedCurrency;var i;if(r.courseDetails.hasOwnProperty("course_summary")&&(T.projectDetails.projectSummary=e.trustAsHtml(r.courseDetails.course_summary)),r.courseDetails.hasOwnProperty("course_objective")&&(T.projectDetails.projectObjective=e.trustAsHtml(r.courseDetails.course_objective)),r.courseDetails.is_verifiable&&(T.projectDetails.isProjectVerifiable=parseInt(r.courseDetails.is_verifiable)),r.courseDetails.course_promo_video&&(T.projectDetails.projectPromoVideo=e.trustAsResourceUrl(r.courseDetails.course_promo_video)),r.courseDetails.course_prerequisites&&(T.projectDetails.projectPrerequisites=e.trustAsHtml(r.courseDetails.course_prerequisites)),r.courseDetails.student_will_learn&&(T.projectDetails.studentWillLearn=e.trustAsHtml(r.courseDetails.student_will_learn)),r.hasOwnProperty("savingPercent")&&(T.projectDetails.savingPercent=r.savingPercent),r.hasOwnProperty("certificatePrice")&&(i=d.convertAmount(r.certificatePrice),T.projectDetails.certificatePrice=i.value,T.projectDetails.formattedCertificatePrice=i.formattedCurrency),r.hasOwnProperty("courseKitDetails")&&(T.projectDetails.projectKitDetails=r.courseKitDetails,T.projectDetails.projectKitDetails.kitDescription=e.trustAsHtml(r.courseKitDetails.kitDescription),r.courseKitDetails.hasOwnProperty("kitUrl")||(T.projectDetails.projectKitDetails.kitUrl=d.getKitUrl(r.courseKitDetails.storeKitId)),r.courseKitDetails.hasOwnProperty("kitImage")&&(T.projectDetails.projectKitDetails.kitImageUrl=d.getKitImageUrl(r.courseKitDetails.kitImage))),r.hasOwnProperty("instructorDetails"))for(var c=0;c<r.instructorDetails.length;c++)T.projectDetails.instructorDetails.push({name:r.instructorDetails[c].name,details:r.instructorDetails[c].about_me_profile,imageDetails:{folderName:r.instructorDetails[c].folder_name,fileName:r.instructorDetails[c].image_path}});if(r.hasOwnProperty("volunteerDetails"))for(var c=0;c<r.volunteerDetails.length;c++)T.projectDetails.volunteerDetails.push({name:r.volunteerDetails[c].name,details:r.volunteerDetails[c].about_me_profile,imageDetails:{folderName:r.volunteerDetails[c].folder_name,fileName:r.volunteerDetails[c].image_path}});if(r.hasOwnProperty("certificateProviders"))for(var c=0;c<r.certificateProviders.length;c++)T.projectDetails.certifateProviderDetails.push({name:r.certificateProviders[c].name,image:l.getPath("images")+"/"+r.certificateProviders[c].certificate_providers_image.replace("images/","")});if(r.hasOwnProperty("relatedCourses"))for(var c=0;c<r.relatedCourses.length;c++)r.relatedCourses[c].id!==t&&T.projectDetails.relatedProjects.push({id:r.relatedCourses[c].id,projectName:r.relatedCourses[c].course_name,projectSummary:r.relatedCourses[c].course_summary,projectImageDetails:{folderName:r.relatedCourses[c].folder_name,fileName:r.relatedCourses[c].course_image},projectStatus:parseInt(r.relatedCourses[c].status),projectSubname:r.relatedCourses[c].course_subname});o.exist()&&(T.projectDetails.user.isMentor=r.isMentor,T.projectDetails.user.isArchitect=r.isArchitect,T.projectDetails.user.isEnrolled=r.isEnrolled,T.projectDetails.user.isSubscribed=r.isSubscribed,r.hasOwnProperty("isPreEnrolled")&&r.isPreEnrolled&&(T.projectDetails.isPreEnrolled=!0))}if(U){if(U.exist())return U;U.recreatePromise()}return T.errors.fetchingProjectDetails=!1,T.request.fetchingProjectDetails=!0,U=i.createPromise(),c.getProjectDetailsForInfoPage({projectId:t}).$promise.then(function(e){T.status.projectDetailsModuleLoaded=!0,T.request.fetchingProjectDetails=!1,e=n.processData(e),r(e),s.upgrade&&P(),U.resolve(),U.destroy()},function(e){T.errors.fetchingProjectDetails=!0,T.request.fetchingProjectDetails=!1,T.status.projectDetailsModuleLoaded=!1,e=n.processError(e),U.reject(),U.destroy()}),U}function P(){T.projectDetails.enrollTabActive=!0}function h(e){function t(e){if(e.hasOwnProperty("errorDetails")&&e.errorDetails.hasOwnProperty("error_code"))switch(e.errorDetails.error_code){case"already_enrolled":T.projectDetails.isPreEnrolled=!0;break;default:toastr.error(T.messages.userPreEnrollError)}else toastr.error(T.messages.userPreEnrollError)}if(g.redirectIfSessionNotExist(),O){if(O.exist())return O;O.recreatePromise()}return O=i.createPromise(),T.request.preEnrollingUserInUpcomingProject=!0,c.preEnrollUserInUpcomingProject({projectId:e}).$promise.then(function(e){T.request.preEnrollingUserInUpcomingProject=!1,e=n.processData(e),e.hasOwnProperty("success")&&e.success===!0?(T.status.userPreEnrollSuccess=!0,p.addAlert("upcomingProjectAlert",{type:"success",msg:T.messages.userPreEnrollSuccessAlert}),toastr.success(T.messages.userPreEnrollSuccess),O.resolve(e)):(t(e),O.reject(e)),O.destroy()},function(e){e=n.processError(e),T.request.preEnrollingUserInUpcomingProject=!1,toastr.error(T.messages.userPreEnrollError),O.reject(e),O.destroy()}),O}function y(e){function t(t){if(t.hasOwnProperty("errorDetails")&&t.errorDetails.hasOwnProperty("error_type"))switch(t.errorDetails.error_type){case"already_enrolled":toastr.error(T.messages.alreadyEnrolledInProject),A(e);break;default:toastr.error(T.messages.userEnrollError)}}if(g.redirectIfSessionNotExist(),k){if(k.exist())return k;k.recreatePromise()}return T.request.enrollingUserInProject=!0,k=i.createPromise(),c.enrollUserInProject({projectId:e}).$promise.then(function(r){T.request.enrollingUserInProject=!1,T.status.userEnrollSuccess=!0,r=n.processData(r),r.hasOwnProperty("success")&&r.success===!0?(T.projectDetails.user.isEnrolled=!0,toastr.success(T.messages.userEnrollSuccess),k.resolve(),A(e)):(t(r),k.reject(r)),k.destroy()},function(e){T.request.enrollingUserInProject=!1,e=n.processError(e),k.reject(),k.destroy(),toastr.error(T.messages.userEnrollError)}),k}function S(){g.redirectIfSessionNotExist(),f.open({templateUrl:l.getPath("projectDetails.project-subscription-without-kit-html"),controller:"ProjectSubscriptionWithoutKitController",controllerAs:"subscription"})}function v(e){function t(){f.open({templateUrl:l.getPath("projectDetails.project-subscription-form-html"),controller:"ProjectSubscriptionFormController",controllerAs:"subscriptionForm"})}g.redirectIfSessionNotExist(),t()}function I(){g.redirectIfSessionNotExist(),f.open({templateUrl:l.getPath("projectDetails.project-subscription-html"),controller:"ProjectSubscriptionController",controllerAs:"subscription"})}function C(){T.request=_(),T.errors=w(),T.status=E(),T.projectDetails={}}function F(){function e(){T.projectDetails.hasOwnProperty("projectPrice")&&(T.projectDetails.formattedProjectPrice=d.convertAmount(T.projectDetails.projectPrice).formattedCurrency),T.projectDetails.hasOwnProperty("certificatePrice")&&(T.projectDetails.formattedCertificatePrice=d.convertAmount(T.projectDetails.certificatePrice).formattedCurrency)}function t(){o.exist()||C()}a.listenEvent({componentName:"projectDetailsInfoPage",eventName:d.events.onCurrencyChange,eventCallback:e}),a.listenEvent({componentName:"projectDetailsInfoPage",eventName:o.events.onSessionUpdate,eventCallback:t})}function A(e){r(function(){f.infoDialog({template:T.messages.redirectingUserToClassroom})},1e3),r(function(){f.close(),t.go("root.classroom",{projectId:e})},2e3)}function _(){return{fetchingProjectDetails:!1,preEnrollingUserInUpcomingProject:!1,enrollingUserInProject:!1}}function w(){return{fetchingProjectDetails:!1}}function E(){return{projectDetailsModuleLoaded:!1,userPreEnrollSuccess:!1,userEnrollSuccess:!1}}var U,O,k,T;return T={init:D,files:{projectSubscriptionFeatures:l.getPath("projectDetails.project-subscription-features-html"),userAddressForm:l.getPath("projectDetails.user-address-form-html")},projectDetails:{},portalServicesInfo:{getVerifiedAnswerInfoPopup:m.getVerifiedAnswerInfoPopup,getLiveSessionInfoPopup:m.getLiveSessionInfoPopup,getProjectEvaluationInfoPopup:m.getProjectEvaluationInfoPopup},preEnrollUserInUpcomingProject:h,enrollUserInProject:y,subscribeUserInProjectWithoutKitPopup:S,subscribeUserInProjectWithKitPopup:v,subscribeUserInProjectPopup:I,request:_(),errors:w(),status:E(),messages:u.getComponentMessages("projectDetailsMessages"),getProjectDetails:b,setEnrollTabActive:P}}return e.$inject=["$sce","$state","$timeout","$stateParams","promiseService","session","rest","restMiddleware","eventService","pathService","messageService","alertsFactory","storeService","portalServices","routerHelperResolver","popup","authService"],e}),define("project-image-service",[],function(){function e(){function e(e){i=e}function t(){return i}function r(e){o=e}function s(e,t,r,s,c){function n(){return o}function a(o){function c(){if(o.hasOwnProperty("projectId"))return u.hasOwnProperty(o.projectId)?imagePromise[o.projectId].promise:n();var t=e.defer();return t.resolve(a(o)),t.promise}function n(){var t=o.projectId;return u[o.projectId]=e.defer(),r.projectDetails.get({filter:"id = "+t,fields:"folder_name, course_image"}).$promise.then(function(e){return e=s.processData(e),0===e.length?u[t].resolve({isDefault:!0,url:DEFAULT_PROJECT_IMAGE}):u[t].resolve(a({folderName:e[0].folder_name,fileName:e[0].course_image}))},function(e){image_details[o.project_id].reject(),delete image_details[o.project_id]}),imageDetails[o.projectId].promise}function a(e){var r=i.replace(/^\/+/g,"").replace(/\/+$/g,"");r+="/"+e.folderName.replace(/^\/+/g,"").replace(/\/+$/g,"")+"/"+e.fileName;var s=t.getObjectUrl("",r,!0);return{isDefault:!1,url:s}}return c()}o||(o=c.getPath("images.watermark-logo"));var l,u={};return l={getDefaultProjectImageUrl:n,getImageUrl:a}}s.$inject=["$q","s3","rest","restMiddleware","pathService"];var i="course",o="";return{setBaseProjectImageS3Container:e,getBaseProjectImageS3Container:t,setDefaultProjectImageUrl:r,$get:s}}return e}),define("project-subscription-service",[],function(){function e(e,t,r){function s(){g.request=l(),g.errors=u(),g.status=p(),g.subscriptionDetails=d()}function i(e){D=e}function o(){g.status.displayPaymentAddress=!0}function c(t){g.status.displayPaymentAddress=!1,a(function(){g.subscriptionHiddenFormDetails.projectId=e.projectDetails.projectId,g.subscriptionHiddenFormDetails.addressId=t.addressId,g.request.displayBalanceDeduct=!1,g.status.displayCaptcha=!0})}function n(e){g.status.displayCaptcha=!1,g.status.redirecting=!0,g.subscriptionHiddenFormDetails.captchaCode=e,g.status.displayProjectEnrollmentHiddenForm=!0}function a(t){function s(){t()}g.request.displayBalanceDeduct=!0,g.subscriptionDetails.balanceTemplateDetails={amount:e.projectDetails.certificatePrice,balanceDeductMessage:g.messages.projectSubscriptionConfirmation(e.projectDetails.formattedProjectPrice),addFundsButtonText:"Continue",insufficientFundsMessage:function(t){var s=e.projectDetails.projectPrice-t.balance;return s=r.convertAmount(s),g.messages.insufficientFundsToSubscribeProject(t.formattedCurrency,s.formattedCurrency)},displayBack:!0,displayCancel:!1,onInsufficientFunds:s,onSubmit:s,onCancel:function(){m()},onBack:function(){g.request.displayBalanceDeduct=!1,g.status.displayPaymentAddress=!0}}}function l(){return{displayBalanceDeduct:!1}}function u(){return{}}function p(){return{displayPaymentAddress:!1,displayProjectEnrollmentHiddenForm:!1,redirecting:!1,displayCaptcha:!1}}function d(){return{projectId:e.projectDetails.projectId,balanceTemplateDetails:{}}}function m(){D&&D.dismiss()}function j(){D&&D.close()}function f(){g.status.displayCaptcha=!1,g.request.displayBalanceDeduct=!0}var g,D,b=t.getComponentMessages("projectDetailsMessages");return g={init:s,request:l(),errors:u(),status:p(),events:{onDialogClose:j,onCaptchaBackClick:f},messages:{userAddressTitle:b.userAddressTitle,userAddressDescription:b.userAddressDescription,projectSubscriptionConfirmation:b.projectSubscriptionConfirmation,insufficientFundsToSubscribeProject:b.insufficientFundsToSubscribeProject,redirectingToProjectEnrollmentProcess:b.redirectingToProjectEnrollmentProcess},subscriptionHiddenFormDetails:{},subscriptionDetails:d(),setModalInstance:i,showPaymentAddress:o,proceedOnUserAddressDetails:c,proceedOnCaptchaVerification:n}}return e.$inject=["projectDetailsService","messageService","storeService"],e}),define("project-subscription-without-kit-service",[],function(){function e(e,t,r){function s(){g.subscriptionDetails=d(),g.request=l(),g.errors=u(),g.status=p()}function i(e){D=e}function o(t){g.status.displayPaymentAddress=!1,a(function(){g.request.displayBalanceDeduct=!1,g.subscriptionHiddenFormDetails.projectId=e.projectDetails.projectId,g.subscriptionHiddenFormDetails.addressId=t.addressId,g.status.displayCaptcha=!0})}function c(e){g.status.displayCaptcha=!1,g.status.redirecting=!0,g.subscriptionHiddenFormDetails.captchaCode=e,g.status.displayProjectEnrollmentHiddenForm=!0}function n(){g.status.displayPaymentAddress=!0}function a(t){function s(){t()}g.request.displayBalanceDeduct=!0,g.subscriptionDetails.balanceTemplateDetails={amount:e.projectDetails.certificatePrice,balanceDeductMessage:g.messages.projectSubscriptionConfirmation(e.projectDetails.formattedCertificatePrice),addFundsButtonText:"Continue",displayCancel:!1,displayBack:!0,insufficientFundsMessage:function(t){var s=e.projectDetails.certificatePrice-t.balance;return s=r.convertAmount(s),g.messages.insufficientFundsToSubscribeProject(t.formattedCurrency,s.formattedCurrency)},onInsufficientFunds:s,onSubmit:s,onCancel:function(){m(),b.destroy()},onBack:function(){g.request.displayBalanceDeduct=!1,g.status.displayPaymentAddress=!0}}}function l(){return{displayBalanceDeduct:!1,subscribingUserInProjectWithoutKit:!1}}function u(){return{}}function p(){return{displayPaymentAddress:!1,displayProjectEnrollmentHiddenForm:!1,displayCaptcha:!1,redirecting:!1}}function d(){return{projectId:e.projectDetails.projectId,balanceTemplateDetails:{}}}function m(){D&&D.dismiss()}function j(){D&&D.close()}function f(){g.request.displayBalanceDeduct=!0,g.status.displayCaptcha=!1}var g,D,b,P=t.getComponentMessages("projectDetailsMessages");return g={init:s,request:l(),errors:u(),status:p(),events:{onDialogClose:j,onCaptchaBackClick:f},subscriptionDetails:d(),subscriptionHiddenFormDetails:{},messages:{userAddressTitle:P.userAddressTitle,userAddressDescription:P.userAddressDescription,projectSubscriptionConfirmation:P.projectSubscriptionConfirmation,insufficientFundsToSubscribeProject:P.insufficientFundsToSubscribeProject,redirectingToProjectEnrollmentProcess:t.getComponentMessages("projectDetailsMessages").redirectingToProjectEnrollmentProcess},setModalInstance:i,proceedOnUserAddressDetails:o,proceedOnCaptchaVerification:c,showPaymentAddress:n}}return e.$inject=["projectDetailsService","messageService","storeService"],e}),define("project-subscription-form-service",[],function(){function e(e,t,r,s,i,o,c,n,a){function l(){U.projectSubscriptionFormDetails=d(),U.request=C(),U.errors=F(),U.status=A()}function u(e){O=e}function p(e){if(E){if(E.exist())return E;E.recreatePromise()}return E=o.createPromise(),U.request.fetchingProjectSubscriptionFormDetails=!0,t.getProjectSubscriptionFormDetails({projectId:e}).$promise.then(function(e){U.request.fetchingProjectSubscriptionFormDetails=!1,U.status.projectSubscriptionFormLoaded=!0,e=r.processData(e),v(e.kitAccessories),e.hasOwnProperty("kitAccessories")&&e.kitAccessories.length>0?U.projectSubscriptionFormDetails.projectKitAccessoriesDisplay=!0:U.projectSubscriptionFormDetails.userAddressFormDisplay=!0,E.resolve(),E.destroy()},function(e){U.request.fetchingProjectSubscriptionFormDetails=!1,e=r.processError(e),E.reject(),E.destroy(),O&&_(),i.error(U.messages.projectSubscriptionFormDetailsFetchError)}),E}function d(){return{projectId:e.projectDetails.projectId,projectKitAccessoriesDisplay:!1,userAddressFormDisplay:!1,billDisplay:!1,projectKitAccessories:[],selectedKitAccessories:[],totalSelectedAccessoriesPrice:0,formattedTotalSelecteAccessoriesPrice:c.convertAmount(0).formattedCurrency,noShippingOptionsAvailable:!1,shippingDetails:null,billingDetails:{totalPrice:0,formattedTotalPrice:c.convertAmount(0).formattedCurrency},balanceTemplateDetails:{}}}function m(t,r){a.clearAlerts("shippingNotAvailable"),t&&t.zoneId?c.getProjectKitShippingCost({kitId:e.projectDetails.storeKitId,countryId:r.countryId,zoneId:t.zoneId}).then(function(e){U.projectSubscriptionFormDetails.noShippingOptionsAvailable=!1,e.countryId=r.countryId,e.zoneId=t.zoneId,U.projectSubscriptionFormDetails.shippingDetails=e},function(e){I(e)}):U.projectSubscriptionFormDetails.noShippingOptionsAvailable=!1}function j(e){function t(){var e=s();e===-1&&U.projectSubscriptionFormDetails.selectedKitAccessories.push({accessoryId:n.accessoryId,accessoryName:n.accessoryName,quantity:n.quantity,accessoryPrice:n.accessoryPrice,formattedAccessoryPrice:n.formattedAccessoryPrice})}function r(){var e=s();e!==-1&&U.projectSubscriptionFormDetails.selectedKitAccessories.splice(e,1)}function s(){for(var e=U.projectSubscriptionFormDetails.selectedKitAccessories,t=0;t<e.length;t++)if(e[t].accessoryId===n.accessoryId)return t;return-1}var i,o=U.projectSubscriptionFormDetails.totalSelectedAccessoriesPrice,n=U.projectSubscriptionFormDetails.projectKitAccessories[e.optionId];e.value===!0?(o+=n.accessoryPrice,t()):(o-=n.accessoryPrice,r()),i=c.convertAmount(o),U.projectSubscriptionFormDetails.totalSelectedAccessoriesPrice=i.amount,U.projectSubscriptionFormDetails.formattedTotalSelecteAccessoriesPrice=i.formattedCurrency}function f(){U.projectSubscriptionFormDetails.userAddressFormDisplay=!1,U.projectSubscriptionFormDetails.projectKitAccessoriesDisplay=!0}function g(){U.projectSubscriptionFormDetails.billDisplay=!1,U.projectSubscriptionFormDetails.userAddressFormDisplay=!0}function D(){U.status.displayCaptcha=!1,U.request.displayBalanceDeduct=!0}function b(){a.clearAlerts("accessoryOutOfStock"),U.projectSubscriptionFormDetails.userAddressFormDisplay=!0,U.projectSubscriptionFormDetails.projectKitAccessoriesDisplay=!1}function P(e){T=e,S(e)}function h(){function t(){U.request.displayBalanceDeduct=!1,U.status.displayCaptcha=!0,U.subscriptionHiddenFormDetails.projectId=e.projectDetails.projectId,U.subscriptionHiddenFormDetails.addressId=T.addressId,U.subscriptionHiddenFormDetails.requireKit=!0,U.subscriptionHiddenFormDetails.selectedKitAccessories=[];for(var t=0;t<U.projectSubscriptionFormDetails.selectedKitAccessories.length;t++)U.subscriptionHiddenFormDetails.selectedKitAccessories.push({accessoryId:U.projectSubscriptionFormDetails.selectedKitAccessories[t].accessoryId})}U.projectSubscriptionFormDetails.billDisplay=!1,U.request.displayBalanceDeduct=!0,U.projectSubscriptionFormDetails.balanceTemplateDetails={amount:U.projectSubscriptionFormDetails.billingDetails.totalPrice,balanceDeductMessage:U.messages.projectSubscriptionConfirmation(U.projectSubscriptionFormDetails.billingDetails.formattedTotalPrice),addFundsButtonText:"Continue",displayBack:!0,displayCancel:!1,insufficientFundsMessage:function(e){var t=c.convertAmount(U.projectSubscriptionFormDetails.billingDetails.totalPrice-e.balance).formattedCurrency;return U.messages.insufficientFundsToSubscribeProject(e.formattedCurrency,t)},onInsufficientFunds:t,onSubmit:t,onCancel:function(){U.request.displayBalanceDeduct=!1,_()},onBack:function(){U.request.displayBalanceDeduct=!1,U.projectSubscriptionFormDetails.billDisplay=!0}}}function y(e){U.status.displayCaptcha=!1,U.status.redirecting=!0,U.subscriptionHiddenFormDetails.captchaCode=e,U.status.displayProjectEnrollmentHiddenForm=!0}function S(t){function r(){var t=U.projectSubscriptionFormDetails.billingDetails;t.totalPrice=e.projectDetails.projectPrice+U.projectSubscriptionFormDetails.totalSelectedAccessoriesPrice+U.projectSubscriptionFormDetails.shippingDetails.shippingPrice,t.formattedTotalPrice=c.convertAmount(t.totalPrice).formattedCurrency}U.projectSubscriptionFormDetails.projectKitAccessoriesDisplay=!1,U.projectSubscriptionFormDetails.userAddressFormDisplay=!1,U.request.generatingBill=!0,U.projectSubscriptionFormDetails.billingDetails.formattedProjectPrice=e.projectDetails.formattedProjectPrice;var s=U.projectSubscriptionFormDetails.shippingDetails;s&&s.countryId===t.countryId&&s.zoneId===t.zoneId?(U.projectSubscriptionFormDetails.billingDetails.formattedShippingPrice=s.formattedShippingPrice,r(),U.request.generatingBill=!1,U.projectSubscriptionFormDetails.billDisplay=!0):c.getProjectKitShippingCost({storeKitId:e.projectDetails.projectKitDetails.storeKitId,countryId:t.countryId,zoneId:t.zoneId}).then(function(e){e.countryId=t.countryId,e.zoneId=t.zoneId,U.projectSubscriptionFormDetails.shippingDetails=e,U.projectSubscriptionFormDetails.billingDetails.formattedShippingPrice=e.formattedShippingPrice,r(),U.request.generatingBill=!1,U.projectSubscriptionFormDetails.billDisplay=!0},function(e){U.request.generatingBill=!1,U.projectSubscriptionFormDetails.billDisplay=!1,U.projectSubscriptionFormDetails.userAddressFormDisplay=!0,I(e)})}function v(e){for(var t,r=0;r<e.length;r++)t=c.convertAmount(e[r].price),U.projectSubscriptionFormDetails.projectKitAccessories.push({accessoryId:e[r].id,accessoryPrice:t.amount,formattedAccessoryPrice:t.formattedCurrency,quantity:parseInt(e[r].quantity),accessoryName:e[r].name,elementDetails:{element:"input",elementText:e[r].name,useElementWrapper:"checkboxRadioWrapper",selectedAccessoryOption:{value:!1,optionId:r,quantity:parseInt(e[r].quantity)},onAccessoryOptionChange:j,attrs:{name:e[r].name,type:"checkbox","ng-model":"elementDetails.selectedAccessoryOption.value","ng-change":"elementDetails.onAccessoryOptionChange(elementDetails.selectedAccessoryOption)","ng-disabled":"elementDetails.selectedAccessoryOption.quantity === 0"}}})}function I(e){e&&e.hasOwnProperty("error_type")&&"no_shipping_method"===e.error_type&&(U.projectSubscriptionFormDetails.noShippingOptionsAvailable=!0,i.error(U.messages.noShippingOptionsAvailable),a.addAlert("shippingNotAvailable",{type:"danger",msg:U.messages.noShippingOptionsAvailable}))}function C(){return{fetchingProjectSubscriptionFormDetails:!1,generatingBill:!1,displayBalanceDeduct:!1}}function F(){return{fetchingProjectSubscriptionFormDetails:!1}}function A(){return{projectSubscriptionFormLoaded:!1,displayProjectEnrollmentHiddenForm:!1,displayCaptcha:!1,redirecting:!1}}function _(){O&&O.dismiss()}function w(){O&&O.close()}var E,U,O,k=s.getComponentMessages("projectDetailsMessages"),T={};return U={init:l,files:{kitAccessoriesOption:n.getPath("projectDetails.kit-additional-accessories-option-html"),userAddressForm:n.getPath("projectDetails.user-address-form-html")},setModalInstance:u,projectSubscriptionFormDetails:d(),request:C(),errors:F(),status:A(),events:{onZoneChange:m,onAccessoryOptionChange:j,proceedOnSelectedKitAccessories:b,onUserAddressBackClick:f,onBillDisplayBackClick:g,onCaptchaBackClick:D,onDialogClose:w,proceedOnFinalConfirmation:h},messages:angular.extend(s.getComponentMessages("projectSubscriptionFormMessages"),{insufficientFundsToSubscribeProject:k.insufficientFundsToSubscribeProject,projectSubscriptionConfirmation:k.projectSubscriptionConfirmation,redirectingToProjectEnrollmentProcess:k.redirectingToProjectEnrollmentProcess}),proceedOnUserAddressDetails:P,proceedOnCaptchaVerification:y,subscriptionHiddenFormDetails:{},getProjectSubscriptionFormDetails:p}}return e.$inject=["projectDetailsService","rest","restMiddleware","messageService","toastr","promiseService","storeService","pathService","alertsFactory"],e}),define("project-details-controller",[],function(){function e(e,t,r){function s(){t.setHeaderActive(!0),r.init(),p.request=r.request,p.status=r.status,p.errors=r.errors,p.messages=r.messages,p.files=r.files,p.ajaxLoaderProjectDetails={msg:r.messages.loadingProjectDetails},p.ajaxLoaderProjectRetryDetails={msg:r.messages.projectDetailsFetchError},p.projectDetails={},p.portalServicesInfo=r.portalServicesInfo,p.events={reloadProjectDetails:o},p.preEnrollUserInUpcomingProject=c,p.enrollUserInProject=n,p.subscribeUserInProjectWithoutKitPopup=a,p.subscribeUserInProjectWithKitPopup=l,p.subscribeUserInProjectPopup=u,p.setEnrollTabActive=r.setEnrollTabActive,i()}function i(){r.getProjectDetails(e.projectId).then(function(){p.projectDetails=r.projectDetails})}function o(){i()}function c(){r.preEnrollUserInUpcomingProject(e.projectId)}function n(){r.enrollUserInProject(e.projectId)}function a(){r.subscribeUserInProjectWithoutKitPopup(e.projectId)}function l(){r.subscribeUserInProjectWithKitPopup(e.projectId)}function u(){r.subscribeUserInProjectPopup(e.projectId)}var p=this;s()}return e.$inject=["$stateParams","headerService","projectDetailsService"],e}),define("project-subscription-controller",[],function(){function e(e,t){function r(){t.init(),c.request=t.request,c.errors=t.errors,c.status=t.status,c.events=t.events,c.messages=t.messages,c.ajaxLoaderSubscribingUserInProjectDetails={msg:t.messages.subscribingToProject},c.ajaxLoaderSubscribingUserInProjectRetryDetails={msg:t.messages.subscribeToProjectError},c.ajaxLoaderRedirectingUserToClassroomDetails={msg:t.messages.redirectingUserToClassroom},c.ajaxLoaderRedirectingDetails={msg:t.messages.redirectingToProjectEnrollmentProcess},c.subscriptionDetails=t.subscriptionDetails,c.showPaymentAddress=o,c.proceedOnUserAddressDetails=s,c.proceedOnCaptchaVerification=i,c.subscriptionHiddenFormDetails=t.subscriptionHiddenFormDetails,t.setModalInstance(e),o()}function s(e){t.proceedOnUserAddressDetails(e)}function i(e){t.proceedOnCaptchaVerification(e)}function o(){t.showPaymentAddress()}var c=this;r()}return e.$inject=["$uibModalInstance","projectSubscriptionService"],e}),define("project-subscription-without-kit-controller",[],function(){function e(e,t){function r(){t.init(),c.request=t.request,c.errors=t.errors,c.status=t.status,c.messages=t.messages,c.subscriptionDetails=t.subscriptionDetails,c.ajaxLoaderSubscribingUserInProjectWithoutKitDetails={msg:t.messages.subscribingToProject},c.ajaxLoaderSubscribingUserInProjectWithoutKitRetryDetails={msg:t.messages.subscribeToProjectError},c.ajaxLoaderRedirectingUserToClassroomDetails={msg:t.messages.redirectingUserToClassroom},c.ajaxLoaderRedirectingDetails={msg:t.messages.redirectingToProjectEnrollmentProcess},t.setModalInstance(e),c.events=t.events,c.subscriptionHiddenFormDetails=t.subscriptionHiddenFormDetails,c.showPaymentAddress=s,c.proceedOnUserAddressDetails=i,c.proceedOnCaptchaVerification=o,s()}function s(){t.showPaymentAddress()}function i(e){t.proceedOnUserAddressDetails(e)}function o(e){t.proceedOnCaptchaVerification(e)}var c=this;r()}return e.$inject=["$uibModalInstance","projectSubscriptionWithoutKitService"],e}),define("project-subscription-form-controller",[],function(){function e(e,t,r){function s(){r.init(),r.setModalInstance(t),a.projectSubscriptionFormDetails=r.projectSubscriptionFormDetails,a.subscriptionHiddenFormDetails=r.subscriptionHiddenFormDetails,a.request=r.request,a.errors=r.errors,a.status=r.status,a.files=r.files,a.messages=r.messages,a.ajaxLoaderProjectSubscriptionFormDetails={msg:r.messages.loadingProjectSubscriptionFormDetails},a.ajaxLoaderGeneratingBillDetails={msg:r.messages.generatingBill},a.ajaxLoaderCheckingBalanceDetails={msg:r.messages.checkingBalance},a.ajaxLoaderSubscribingToProjectDetails={msg:r.messages.subscribingToProject},a.ajaxLoaderSubscribingToProjectRetryDetails={msg:r.messages.subscribeToProjectError},a.ajaxLoaderRedirectingUserToClassroomDetails={msg:r.messages.redirectingUserToClassroom},a.ajaxLoaderRedirectingDetails={msg:r.messages.redirectingToProjectEnrollmentProcess},a.events=r.events,a.cancelProcess=o,a.proceedOnUserAddressDetails=c,a.proceedOnCaptchaVerification=n,i()}function i(){r.getProjectSubscriptionFormDetails(e.projectId).then(function(){a.projectSubscriptionFormDetails=r.projectSubscriptionFormDetails})}function o(){t.dismiss()}function c(e){r.proceedOnUserAddressDetails(e)}function n(e){r.proceedOnCaptchaVerification(e)}var a=this;s()}return e.$inject=["$stateParams","$uibModalInstance","projectSubscriptionFormService"],e}),define("project-syllabus-directive",[],function(){function e(e,t,r){function s(s,i,o,c){function n(t){s.processing=!0,e.init(),e.getProjectSyllabus(t).then(function(){var r=e.projectSyllabus[t].data;s.processing=!1,r.length>0&&a(r)},function(){s.processing=!1,s.errorObj={error:!0,msg:l.getMessage("projectSyllabusFetchFailed")}})}function a(e){function t(){for(var t=0;t<e.length;t++)s.syllabus.push({sectionId:parseInt(e[t].section_id,10),lessonId:parseInt(e[t].lesson_id,10),lessonName:e[t].lesson_display_name?e[t].lesson_display_name:e[t].lesson_name,sectionName:e[t].section_display_name?e[t].section_display_name:e[t].section_name});if(o.defaultSelectedLesson)if("all"!==s.defaultSelectedLesson.sectionId){for(var t=0;t<s.syllabus.length;t++)if(parseInt(s.defaultSelectedLesson.sectionId)===s.syllabus[t].sectionId&&parseInt(s.defaultSelectedLesson.lessonId)===s.syllabus[t].lessonId){s.section=s.syllabus[t];break}}else for(var t=0;t<s.syllabus.length;t++)if(parseInt(s.defaultSelectedLesson.lessonId)===s.syllabus[t].lessonId){s.section=s.syllabus[t];break}}function r(){for(var t=[],r=0,i=0;i<e.length;i++)r=t.indexOf(e[i].section_id),r<0?(t.push(e[i].section_id),s.syllabus.push({sectionId:e[i].section_id,sectionName:e[i].section_display_name?e[i].section_display_name:e[i].section_name,lessons:[{id:parseInt(e[i].lesson_id),name:e[i].lesson_display_name?e[i].lesson_display_name:e[i].lesson_name}]})):s.syllabus[r].lessons.push({id:parseInt(e[i].lesson_id),name:e[i].lesson_display_name?e[i].lesson_display_name:e[i].lesson_name})}if(s.syllabus=[],!o.role)return t();switch(o.role.toLowerCase()){case"dropdown":return t();case"accordion":return r();default:return t()}}if(!o.projectId&&!o.syllabusDetails)throw"project-id is missing";if(o.syllabusDetails)s.$watch("syllabusDetails",function(e){e&&a(s.syllabusDetails)});else{var l=r.getComponentMessages("projects");s.ajaxLoaderProjectSyllabusDetails={msg:l.getMessage("LoadingProjectSyllabus"),loaderImg:t.getPath("images.content-loader")},n(s.projectId)}s.selectedLesson=function(e){s.onLessonChange({lessonDetails:e})},s.reloadSyllabus=function(){s.errorObj=null,n(s.projectId)}}function i(e,r){if(!r.role)return t.getPath("project.project-syllabus-dropdown-html");switch(r.role.toLowerCase()){case"dropdown":return t.getPath("project.project-syllabus-dropdown-html");case"accordion":return t.getPath("project.project-syllabus-accordion-html");default:return t.getPath("project.project-syllabus-dropdown-html")}}return{restrict:"E",templateUrl:i,scope:{projectId:"=",onLessonChange:"&",showLessonLink:"@",defaultSelectedLesson:"=",syllabusDetails:"=",role:"@"},link:s}}return e.$inject=["projectService","pathService","messageService"],e}),define("project-grading-criteria-directive",[],function(){function e(e,t,r){function s(s,i,o,c){function n(t){s.processing=!0,e.getProjectGradingCriteria(t).then(function(e){s.processing=!1,s.details=a(e)},function(e){s.processing=!1,s.errorObj=e})}function a(e){if(e){for(var t=e.checklist?e.checklist:[],r=e.projectGradeCriteria?e.projectGradeCriteria:[],s=e.gradingMatrix?e.gradingMatrix:[],i=[],o=[],c=[],n=0,a=0;a<t.length;a++)n=c.indexOf(t[a].section_id),
n<0?(c.push(t[a].section_id),i.push({sectionId:t[a].section_id,sectionName:t[a].section_display_name?t[a].section_display_name:checklistDetails[a].section_name,checklistDetails:[{id:t[a].checklist_id,name:t[a].checklist_name,description:t[a].checklist_description,weightage:t[a].checklist_weightage}]})):i[n].checklistDetails.push({id:t[a].checklist_id,name:t[a].checklist_name,description:t[a].checklist_description,weightage:t[a].checklist_weightage});for(var a=0;a<r.length;a++)o.push({id:parseInt(r[a].id),weightage:r[a].weightage,description:r[a].description});return{checklist:i,gradingCriteria:o,codeQualityGradingMatrix:s}}}if(!o.projectId&&!o.gradingCriteriaDetails)throw"project-id is missing";if(!o.gradingCriteriaDetails){var l=r.getComponentMessages("projects");s.ajaxLoaderProjectChecklistDetails={msg:l.getMessage("loadingCriteria"),loaderImg:t.getPath("images.content-loader")},n(s.projectId)}o.gradingCriteriaDetails&&s.$watch("gradingCriteriaDetails",function(e){s.details=a(s.gradingCriteriaDetails)}),s.showDetails={checklist:!1,codeQuality:!1},s.reloadGradingCriteria=function(){s.errorObj=null,n(s.projectId)},s.openDetails=function(e){1===parseInt(e)?(s.showDetails.codeQuality===!0&&(s.showDetails.codeQuality=!1),s.showDetails.checklist=!s.showDetails.checklist):(s.showDetails.checklist===!0&&(s.showDetails.checklist=!1),s.showDetails.codeQuality=!s.showDetails.codeQuality)}}return{restrict:"E",templateUrl:t.getPath("project.project-grading-criteria-html"),scope:{projectId:"=",gradingCriteriaDetails:"="},link:s}}return e.$inject=["projectService","pathService","messageService"],e}),define("app/project-details/project-details.runtime.js",["project-details-service","project-image-service","project-subscription-service","project-subscription-without-kit-service","project-subscription-form-service","project-details-controller","project-subscription-controller","project-subscription-without-kit-controller","project-subscription-form-controller","project-syllabus-directive","project-grading-criteria-directive"],function(e,t,r,s,i,o,c,n,a,l,u){return{projectDetailsService:e,projectImageService:t,projectSubscriptionService:r,projectSubscriptionWithoutKitService:s,projectSubscriptionFormService:i,ProjectDetailsController:o,ProjectSubscriptionController:c,ProjectSubscriptionWithoutKitController:n,ProjectSubscriptionFormController:a,projectSyllabusDirective:l,projectGradingCriteriaDirective:u}});